@tailwind base;
@tailwind components;
@tailwind utilities;

/* Theme CSS Variables - Light Theme (default) */
:root[data-theme="light"],
:root:not([data-theme]) {
  --color-bg: #faf9f7;
  --color-surface: #ffffff;
  --color-text-primary: #2d2d2d;
  --color-text-secondary: #6b6b6b;
  --color-accent: #8b7355;
  --color-border: #e8e6e3;
  --color-header-bg: #faf9f7;
  --color-header-text: #2d2d2d;
  --color-header-border: #e8e6e3;
  --color-code-bg: #2d2d2d;
  --color-code-text: #faf9f7;
  --color-code-inline-bg: #f5f3f0;
  --color-code-inline-text: #8b7355;
  --color-tag-bg: #f5f3f0;
  --color-tag-text: #8b7355;
  --color-tag-hover: #e8e6e3;
  --color-hover-bg: #f5f3f0;
  --color-hover-border: #d4c4b0;
}

/* Theme CSS Variables - Dark Theme */
:root[data-theme="dark"] {
  --color-bg: #1a1a1a;
  --color-surface: #2d2d2d;
  --color-text-primary: #faf9f7;
  --color-text-secondary: #8b8b8b;
  --color-accent: #d4a574;
  --color-border: #3d3d3d;
  --color-header-bg: #1a1a1a;
  --color-header-text: #faf9f7;
  --color-header-border: #3d3d3d;
  --color-code-bg: #2d2d2d;
  --color-code-text: #faf9f7;
  --color-code-inline-bg: #3d3d3d;
  --color-code-inline-text: #d4a574;
  --color-tag-bg: #3d3d3d;
  --color-tag-text: #d4a574;
  --color-tag-hover: #4d4d4d;
  --color-hover-bg: #2d2d2d;
  --color-hover-border: #4d4d4d;
}

/* Seasonal Decorations - Based on current month, not theme */

/* Halloween Decorations - October (month 9) */
body[data-season="halloween"]::before {
  content: 'ü¶á';
  position: fixed;
  top: 100px;
  right: 5%;
  font-size: 40px;
  z-index: 999;
  pointer-events: none;
  opacity: 0.7;
  animation: fly-bat 8s ease-in-out infinite;
  filter: drop-shadow(2px 2px 4px rgba(0, 0, 0, 0.3));
}

body[data-season="halloween"]::after {
  content: 'ü¶á ü¶á';
  position: fixed;
  bottom: 120px;
  left: 3%;
  font-size: 35px;
  z-index: 999;
  pointer-events: none;
  opacity: 0.6;
  animation: fly-bat 10s ease-in-out infinite reverse;
  letter-spacing: 50px;
  filter: drop-shadow(2px 2px 4px rgba(0, 0, 0, 0.3));
}

@keyframes fly-bat {
  0%, 100% { transform: translateX(0) translateY(0) rotate(0deg); }
  25% { transform: translateX(80px) translateY(-40px) rotate(20deg); }
  50% { transform: translateX(160px) translateY(0) rotate(0deg); }
  75% { transform: translateX(80px) translateY(40px) rotate(-20deg); }
}

/* Christmas Decorations - December (month 11) */
body[data-season="christmas"]::before {
  content: '‚ùÑ ‚ùÖ ‚ùÜ ‚ùÑ ‚ùÖ ‚ùÜ ‚ùÑ ‚ùÖ ‚ùÜ';
  position: fixed;
  top: 60px;
  left: -200px;
  font-size: 24px;
  color: rgba(200, 220, 255, 0.8);
  z-index: 999;
  pointer-events: none;
  animation: snowflakes 15s linear infinite;
  white-space: nowrap;
  letter-spacing: 150px;
}

body[data-season="christmas"]::after {
  content: '‚ùÑ ‚ùÖ ‚ùÜ ‚ùÑ ‚ùÖ ‚ùÜ ‚ùÑ ‚ùÖ ‚ùÜ';
  position: fixed;
  top: 200px;
  left: -300px;
  font-size: 20px;
  color: rgba(200, 220, 255, 0.6);
  z-index: 999;
  pointer-events: none;
  animation: snowflakes 20s linear infinite;
  white-space: nowrap;
  letter-spacing: 120px;
  animation-delay: -5s;
}

@keyframes snowflakes {
  0% { transform: translateX(0) translateY(0); }
  100% { transform: translateX(calc(100vw + 400px)) translateY(300px); }
}

/* Prism.js syntax highlighting - only apply to code blocks with language classes */
/* Import Prism.js theme but scope it to language-* classes only */
@import 'prismjs/themes/prism-dark.css';

/* Override Prism.js default styles to only apply to language-* classes */
/* This prevents Prism.js from styling plain code blocks without language identifiers */
.prose pre:not([class*="language-"]) {
  /* Ensure plain code blocks don't get Prism.js highlight background */
  background-color: var(--color-code-bg) !important;
  color: var(--color-code-text) !important;
}

.prose pre:not([class*="language-"]) code {
  /* Plain code blocks should not have Prism.js token styling */
  background: transparent !important;
  color: var(--color-code-text) !important;
}

/* Reset any Prism.js token styles on plain code blocks */
.prose pre:not([class*="language-"]) .token {
  /* Remove token styling from plain code blocks */
  color: inherit !important;
  background: transparent !important;
}

/* Custom Prism.js theme overrides to complement blog themes */
/* Only apply to code blocks WITH language classes */
.prose pre[class*="language-"],
.prose code[class*="language-"] {
  background-color: var(--color-code-bg) !important;
  color: var(--color-code-text) !important;
}

/* Token colors - ensure WCAG AA contrast on dark background */
.prose .token.comment,
.prose .token.prolog,
.prose .token.doctype,
.prose .token.cdata {
  color: #8b8b8b; /* Muted gray for comments */
}

.prose .token.punctuation {
  color: #d4c4b0; /* Light beige for punctuation */
}

.prose .token.property,
.prose .token.tag,
.prose .token.boolean,
.prose .token.number,
.prose .token.constant,
.prose .token.symbol,
.prose .token.deleted {
  color: #d4a574; /* Warm beige for properties/numbers */
}

.prose .token.selector,
.prose .token.attr-name,
.prose .token.string,
.prose .token.char,
.prose .token.builtin,
.prose .token.inserted {
  color: #a8c98f; /* Soft green for strings */
}

.prose .token.operator,
.prose .token.entity,
.prose .token.url,
.prose .language-css .token.string,
.prose .style .token.string {
  color: #d4c4b0; /* Light beige for operators */
}

.prose .token.atrule,
.prose .token.attr-value,
.prose .token.keyword {
  color: #c9a8d4; /* Soft purple for keywords */
}

.prose .token.function,
.prose .token.class-name {
  color: #8bb3d4; /* Soft blue for functions */
}

.prose .token.regex,
.prose .token.important,
.prose .token.variable {
  color: #d4a574; /* Warm beige for regex/variables */
}

/* Ensure code blocks maintain existing styling */
.prose pre[class*="language-"] {
  background-color: var(--color-code-bg) !important;
  color: var(--color-code-text) !important;
  @apply rounded p-4 overflow-x-auto my-6;
  font-size: 14px;
  line-height: 1.6;
}

.prose pre[class*="language-"] code {
  @apply bg-transparent p-0;
  color: var(--color-code-text) !important;
  font-size: 14px;
}

/* Ensure inline code styling is preserved (not affected by Prism.js) */
.prose code:not([class*="language-"]) {
  background-color: var(--color-code-inline-bg) !important;
  color: var(--color-code-inline-text) !important;
  @apply px-1.5 py-0.5 rounded text-sm font-mono;
  font-size: 0.9em;
}

/* Custom typography improvements */
@layer base {
  body {
    @apply antialiased;
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
    letter-spacing: -0.011em;
  }
  
  h1, h2, h3, h4, h5, h6 {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
    letter-spacing: -0.02em;
  }
}

/* Ensure line breaks are preserved in markdown content */
.prose br {
  display: block;
  margin-bottom: 0.5em;
}

/* Ensure paragraphs have proper spacing */
.prose p {
  margin-bottom: 1.5em;
  line-height: 1.75;
  font-size: 16px;
  color: var(--color-text-primary);
}

.prose h1, .prose h2, .prose h3 {
  @apply font-semibold;
  color: var(--color-text-primary);
}

.prose h1 {
  @apply text-3xl mt-12 mb-6;
  line-height: 1.25;
  font-weight: 600;
}

.prose h2 {
  @apply text-2xl mt-10 mb-5;
  line-height: 1.3;
  font-weight: 600;
}

.prose h3 {
  @apply text-xl mt-8 mb-4;
  line-height: 1.35;
  font-weight: 600;
}

.prose code {
  background-color: var(--color-code-inline-bg);
  color: var(--color-code-inline-text);
  @apply px-1.5 py-0.5 rounded text-sm font-mono;
  font-size: 0.9em;
}

.prose pre {
  background-color: var(--color-code-bg);
  color: var(--color-code-text);
  @apply rounded p-4 overflow-x-auto my-6;
  font-size: 14px;
  line-height: 1.6;
}

.prose pre code {
  @apply bg-transparent p-0;
  color: var(--color-code-text);
  font-size: 14px;
}

.prose blockquote {
  border-left: 3px solid var(--color-border);
  @apply pl-5 italic my-6;
  color: var(--color-text-secondary);
  font-size: 15px;
  line-height: 1.7;
}

.prose ul, .prose ol {
  @apply space-y-2 my-5;
  padding-left: 1.5em;
  color: var(--color-text-primary);
}

.prose li {
  @apply leading-relaxed;
  margin-bottom: 0.5em;
  font-size: 15px;
  line-height: 1.8;
  color: var(--color-text-primary);
}

.prose ul li {
  list-style-type: disc;
}

.prose ol li {
  list-style-type: decimal;
}

.prose a {
  color: var(--color-accent);
  font-weight: 500;
}

.prose a:hover {
  @apply underline;
}

.prose strong {
  @apply font-semibold;
  color: var(--color-text-primary);
}

.prose hr {
  @apply border-t my-8;
  border-color: var(--color-border);
}

.prose table {
  @apply my-6 w-full;
  border-collapse: collapse;
}

.prose table th,
.prose table td {
  @apply border px-4 py-2 text-left;
  border-color: var(--color-border);
}

.prose table th {
  @apply font-semibold;
  background-color: var(--color-surface);
}

.prose img {
  @apply my-6 rounded;
  max-width: 100%;
  height: auto;
}

